{"is_source_file": true, "format": "Python", "description": "This is a FastAPI application implementing an authentication and DSP query proxy API. It includes endpoints for health check, user signup, login, current user info, and a proxy for internal DSP service requests. The code defines route handlers, security dependencies, and proxy logic with error handling.", "external_files": ["./auth.py", "./config.py", "./db.py", "./models.py", "./security.py"], "external_methods": ["get_current_user_email", "settings", "create_user", "get_db", "get_user_by_email", "init_db", "create_access_token", "hash_password", "verify_password"], "published": ["app"], "classes": [], "methods": [{"name": "dict[str,str] health_check()", "description": "Health check endpoint to verify the service is running.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse signup(payload: SignupRequest)", "description": "Create a new user with email and password and return an access token.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse login(payload: LoginRequest)", "description": "Authenticate a user and return an access token.", "scope": "", "scopeKind": ""}, {"name": "dict[str,Any] me(current_email: str = Depends(get_current_user_email))", "description": "Return the current authenticated user's email address.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] dsp_query( payload: QueryRequest, current_email: str = Depends(get_current_user_email), )", "description": "Proxy the query to the internal DSP service with error handling and security.", "scope": "", "scopeKind": ""}], "calls": ["get_db()", "get_user_by_email()", "hash_password()", "create_user()", "create_access_token()", "verify_password()", "httpx.AsyncClient()", "resp.post()", "resp.json()"], "search-terms": ["FastAPI", "DSP query proxy", "auth endpoints", "signup", "login", "health check", "cors middleware", "JWT token", "async dsp query"], "state": 2, "file_id": 3, "knowledge_revision": 34, "git_revision": "c42a33b9ff053cfda20c2f9a7bd32bbccff5f389", "revision_history": [{"9": "f0ad1026ad17159704725a4fb908a06f4fb2e298"}, {"20": "f0ad1026ad17159704725a4fb908a06f4fb2e298"}, {"23": "e225c3d10072201a38f10e0d24897458d12e7d2a"}, {"34": "c42a33b9ff053cfda20c2f9a7bd32bbccff5f389"}], "ctags": [{"_type": "tag", "name": "allow_all", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^allow_all = settings.CORS_ALLOW_ORIGINS == [\"*\"]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "dsp_query", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^async def dsp_query($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( payload: QueryRequest, current_email: str = Depends(get_current_user_email), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^def health_check() -> dict[str, str]:$/", "language": "Python", "typeref": "typename:dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^def login(payload: LoginRequest) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: LoginRequest)"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^def me(current_email: str = Depends(get_current_user_email)) -> dict[str, Any]:$/", "language": "Python", "typeref": "typename:dict[str,Any]", "kind": "function", "signature": "(current_email: str = Depends(get_current_user_email))"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/natural-query-processing-platform-96847-96856/dsp_backend/src/api/main.py", "pattern": "/^def signup(payload: SignupRequest) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: SignupRequest)"}], "hash": "6df68396c0cbd2fee123c425d3f3b49e", "format-version": 4, "code-base-name": "dsp_backend", "filename": "dsp_backend/src/api/main.py", "fields": [{"name": "allow_all = settings.CORS_ALLOW_ORIGINS == [\"*\"]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}]}